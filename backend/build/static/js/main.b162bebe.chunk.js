(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,,,,,,function(e,a,t){e.exports=t(39)},,,,,,,,function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(12),l=t(5),o=t(3),s=t(40);t(21);const i="http://localhost:8288/api",m=i.replace(/\/api\/?$/,"");var u=()=>{const[e,a]=Object(r.useState)([]),t=Object(o.o)();Object(r.useEffect)(()=>{(async()=>{try{const e=await s.a.get("".concat(i,"/recipes/newest"));a(e.data)}catch(e){console.error("Error fetching recipes:",e)}})()},[]);const c=e=>{t("/recipes/category/".concat(e))};return n.a.createElement("div",{className:"home"},n.a.createElement("header",{className:"home-header"},n.a.createElement("div",{className:"hero-image"},n.a.createElement("div",{className:"hero-text"},n.a.createElement("p",null,"Explore the world of sugar-free food")))),n.a.createElement("section",{className:"home-recipes"},n.a.createElement("div",{className:"recipe-categories"},n.a.createElement("div",{className:"category",onClick:()=>c("Salads")},n.a.createElement("img",{src:"/images/salad.jpg",alt:"Salads"}),n.a.createElement("p",null,"Salads")),n.a.createElement("div",{className:"category",onClick:()=>c("Vegetarian Dishes")},n.a.createElement("img",{src:"/images/vegetarian.jpg",alt:"Vegetarian Dishes"}),n.a.createElement("p",null,"Vegetarian Dishes")),n.a.createElement("div",{className:"category",onClick:()=>c("Low-Sugar Snacks")},n.a.createElement("img",{src:"/images/snacks.jpg",alt:"Low-Sugar Snacks"}),n.a.createElement("p",null,"Low-Sugar Snacks")),n.a.createElement("div",{className:"category",onClick:()=>c("Sugar-Free Desserts")},n.a.createElement("img",{src:"/images/sugar-free-desserts.jpg",alt:"Sugar-Free Desserts"}),n.a.createElement("p",null,"Sugar-Free Desserts")),n.a.createElement("div",{className:"category",onClick:()=>c("Healthy Beverages")},n.a.createElement("img",{src:"/images/beverages.jpg",alt:"Healthy Beverages"}),n.a.createElement("p",null,"Healthy Beverages")),n.a.createElement("div",{className:"category",onClick:()=>c("Low-Sugar Desserts")},n.a.createElement("img",{src:"/images/low-sugar-desserts.jpg",alt:"Low-Sugar Desserts"}),n.a.createElement("p",null,"Low-Sugar Desserts")),n.a.createElement("div",{className:"category",onClick:()=>c("Sugar-Free Snacks")},n.a.createElement("img",{src:"/images/sugar-free-snacks.jpg",alt:"Sugar-Free Snacks"}),n.a.createElement("p",null,"Sugar-Free Snacks")),n.a.createElement("div",{className:"category",onClick:()=>c("Non-Vegetarian Food")},n.a.createElement("img",{src:"/images/non-vegetarian.jpg",alt:"Non-Vegetarian Food"}),n.a.createElement("p",null,"Non-Vegetarian Food")))),n.a.createElement("section",{className:"home-new-recipes"},n.a.createElement("h2",null,"New recipes"),n.a.createElement("div",{className:"new-recipes-list"},e.length>0?e.map(e=>n.a.createElement("div",{className:"recipe-card",key:e.recipe_id},e.image_filename&&n.a.createElement("img",{src:"".concat(m,"/uploads/").concat(e.image_filename),alt:e.title}),n.a.createElement("h3",null,e.title),n.a.createElement("button",{onClick:()=>{return a=e.recipe_id,void t("/recipe/".concat(a));var a}},"Recipe"))):n.a.createElement("p",null,"No recipes found."))))};t(26);var p=e=>{let{recipe:a,fetchRecipes:t}=e;const[c,l]=Object(r.useState)(!1),[u,p]=Object(r.useState)(!1),d=Object(o.o)(),g=localStorage.getItem("user_id");Object(r.useEffect)(()=>{(async()=>{try{const e=(await s.a.get("".concat(i,"/saved/saved"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data;p(e.some(e=>e.recipe_id===a.recipe_id))}catch(e){console.error("Error checking saved status",e)}})()},[a.recipe_id]);return n.a.createElement("div",{className:"recipe-card",onClick:()=>{d("/recipe/".concat(a.recipe_id))}},a.image_filename&&n.a.createElement("img",{src:"".concat(m,"/uploads/").concat(a.image_filename),alt:a.title,className:"recipe-image"}),n.a.createElement("div",{className:"recipe-content"},n.a.createElement("h4",null,a.title),n.a.createElement("p",null,a.instructions.substring(0,100),"...")),n.a.createElement("div",{className:"menu",onClick:e=>{e.stopPropagation(),l(!c)}},"\u2630",c&&n.a.createElement("div",{className:"menu-options"},g&&parseInt(g,10)===a.user_id&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{onClick:()=>{d("/edit-recipe/".concat(a.recipe_id))}},"Edit"),n.a.createElement("div",{onClick:async()=>{const e=localStorage.getItem("token");try{await s.a.delete("".concat(i,"/recipes/").concat(a.recipe_id),{headers:{Authorization:"Bearer ".concat(e)}}),t&&t()}catch(r){console.error("Error deleting recipe:",r)}}},"Delete")),u?n.a.createElement("div",{onClick:async()=>{try{await s.a.delete("".concat(i,"/saved/unsave"),{data:{recipeId:a.recipe_id},headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),p(!1),console.log("Recipe unsaved")}catch(e){console.error("Error unsaving recipe",e)}}},"Unsave"):n.a.createElement("div",{onClick:async()=>{try{await s.a.post("".concat(i,"/saved/save"),{recipeId:a.recipe_id},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),p(!0),console.log("Recipe saved")}catch(e){console.error("Error saving recipe",e)}}},"Save"),n.a.createElement("div",{onClick:()=>{console.log("Report recipe")}},"Report"))))};t(27);var d=()=>{const{category:e}=Object(o.q)(),[a,t]=Object(r.useState)([]),[c,l]=Object(r.useState)("all"),[m,u]=Object(r.useState)(!1),[d,g]=Object(r.useState)(e||"all"),E=Object(o.o)();Object(r.useEffect)(()=>{localStorage.getItem("token")&&u(!0)},[]);const v=Object(r.useCallback)(async()=>{const e=localStorage.getItem("token"),a=localStorage.getItem("user_id"),r=a?String(a):null;try{let a;if("saved"===c)a=await s.a.get("".concat(i,"/saved/saved"),{headers:{Authorization:"Bearer ".concat(e)}}),"all"!==d&&(a={data:a.data.filter(e=>e.category===d)});else if("my"===c){if(!r)return console.error("No user ID found. Cannot fetch user-specific recipes."),void t([]);a={data:(await s.a.get("".concat(i,"/recipes"),{headers:{Authorization:"Bearer ".concat(e)}})).data.filter(e=>String(e.user_id)===r&&("all"===d||e.category===d))}}else a="all"===d?await s.a.get("".concat(i,"/recipes")):await s.a.get("".concat(i,"/recipes/category/").concat(d));t(a.data)}catch(n){console.error("Error fetching recipes:",n),t([])}},[c,d]);Object(r.useEffect)(()=>{e&&g(e)},[e]),Object(r.useEffect)(()=>{v()},[v]);return n.a.createElement("div",{className:"recipe-list"},n.a.createElement("div",{className:"tabs"},n.a.createElement("button",{className:"saved"===c?"active":"",onClick:()=>l("saved")},"Saved Recipes"),n.a.createElement("button",{className:"all"===c?"active":"",onClick:()=>l("all")},"All Recipes"),n.a.createElement("button",{className:"my"===c?"active":"",onClick:()=>l("my")},"My Recipes")),n.a.createElement("div",{className:"recipe-header"},n.a.createElement("div",{className:"recipe-actions"},n.a.createElement("select",{className:"category-select",value:d,onChange:e=>{return a=e.target.value,g(a),void E("all"===a?"/recipes":"/recipes/category/".concat(a));var a}},n.a.createElement("option",{value:"all"},"All"),n.a.createElement("option",{value:"Salads"},"Salads"),n.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),n.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),n.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),n.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),n.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),n.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),n.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),m&&n.a.createElement("button",{className:"add-recipe-button",onClick:()=>{E("/add-recipe")}},"+ Add Recipe"))),n.a.createElement("div",{className:"recipes-container"},a.length>0?a.map(e=>n.a.createElement(p,{key:e.recipe_id,recipe:e,fetchRecipes:v})):n.a.createElement("p",null,"No recipes found.")))};t(28);var g=()=>{const{id:e}=Object(o.q)(),[a,t]=Object(r.useState)(null),[c,l]=Object(r.useState)(""),[u,p]=Object(r.useState)("default.png"),[d,g]=Object(r.useState)([]),[E,v]=Object(r.useState)(""),[h,f]=Object(r.useState)(null),[b,S]=Object(r.useState)(""),[y,N]=Object(r.useState)(!1),[w,k]=Object(r.useState)(!1),C=Object(o.o)(),j=localStorage.getItem("user_id"),O=localStorage.getItem("token"),_=Object(r.useRef)(null),D=Object(r.useCallback)(async()=>{try{const a=await s.a.get("".concat(i,"/comments/recipe/").concat(e),{headers:{Authorization:"Bearer ".concat(O)}});if(a.data&&Array.isArray(a.data)){const e=await Promise.all(a.data.map(async e=>{const a=await s.a.get("".concat(i,"/users/").concat(e.user_id));return{...e,profile_picture:a.data.profile_picture||"default.png"}}));g(e)}}catch(a){console.error("Error fetching comments:",a)}},[e,O]);Object(r.useEffect)(()=>{(async()=>{try{const a=await s.a.get("".concat(i,"/recipes/").concat(e));if(t(a.data),a.data.user_id){const e=await s.a.get("".concat(i,"/users/").concat(a.data.user_id));l(e.data.username),p(e.data.profile_picture||"default.png")}if(O){const e=(await s.a.get("".concat(i,"/saved/saved"),{headers:{Authorization:"Bearer ".concat(O)}})).data;k(e.some(e=>e.recipe_id===a.data.recipe_id))}D()}catch(a){console.error("Error fetching recipe:",a)}})()},[e,O,D,j]);const F=async()=>{if(""!==b.trim())try{await s.a.put("".concat(i,"/comments/").concat(h),{content:b},{headers:{Authorization:"Bearer ".concat(O)}}),D(),f(null),S("")}catch(e){console.error("Error updating comment:",e)}},I=e=>{_.current&&!_.current.contains(e.target)&&N(!1)};Object(r.useEffect)(()=>(y?document.addEventListener("mousedown",I):document.removeEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}),[y]);const A=e=>{const a=j===e.toString()?"/profile":"/user/".concat(e);C(a)};return a?n.a.createElement("div",{className:"recipe-details"},n.a.createElement("img",{className:"recipe-img",src:"".concat(m,"/uploads/").concat(a.image_filename),alt:a.title}),n.a.createElement("div",{className:"recipe-info"},n.a.createElement("h2",null,a.title),n.a.createElement("p",{className:"author"},n.a.createElement("img",{src:"".concat(m,"/uploads/").concat(u),alt:"Profile",className:"profile-picture"}),n.a.createElement("span",{onClick:()=>A(a.user_id),className:"username"},c)),a.products&&a.products.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Products"),n.a.createElement("ul",{className:"products-txt"},a.products.map(e=>n.a.createElement("li",{key:e.product_id},n.a.createElement("strong",null,e.name),n.a.createElement("br",null),n.a.createElement("em",null,e.description),n.a.createElement("br",null),"Price: ",e.price,", Brand: ",e.brand,", Shop:"," ",e.shop)))),n.a.createElement("h3",null,"Instructions"),n.a.createElement("p",{className:"instructions-txt"},a.instructions),n.a.createElement("h3",null,"Comments"),n.a.createElement("div",{className:"comments-section"},d.length>0?d.map((e,a)=>n.a.createElement("div",{key:e.comment_id||a,className:"comment"},n.a.createElement("img",{src:"".concat(m,"/uploads/").concat(e.profile_picture),alt:e.username,className:"profile-picture"}),h===e.comment_id?n.a.createElement("div",null,n.a.createElement("textarea",{value:b,onChange:e=>S(e.target.value)}),n.a.createElement("button",{onClick:F},"Update"),n.a.createElement("button",{onClick:()=>f(null)},"Cancel")):n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,n.a.createElement("span",{onClick:()=>A(e.user_id),className:"username clickable-username"},e.username),": ",e.content),n.a.createElement("div",{className:"comments-details"},n.a.createElement("small",null,"Commented on:"," ",e.date_commented?new Date(e.date_commented).toLocaleString():"Date not available"),e.user_id===parseInt(j)&&n.a.createElement("div",{className:"comments-buttons-change"},n.a.createElement("button",{onClick:()=>{return a=e.comment_id,t=e.content,f(a),void S(t);var a,t}},"Edit"),n.a.createElement("button",{onClick:()=>(async e=>{try{await s.a.delete("".concat(i,"/comments/").concat(e),{headers:{Authorization:"Bearer ".concat(O)}}),D()}catch(a){console.error("Error deleting comment:",a)}})(e.comment_id)},"Delete")))))):n.a.createElement("p",null,"No comments yet."),n.a.createElement("div",{className:"add-comment"},n.a.createElement("textarea",{value:E,onChange:e=>{v(e.target.value)},placeholder:"Add a comment...",rows:"3"}),n.a.createElement("button",{onClick:async()=>{if(""!==E.trim())try{await s.a.post("".concat(i,"/comments"),{recipe_id:e,user_id:j,content:E},{headers:{Authorization:"Bearer ".concat(O)}}),D(),v("")}catch(a){console.error("Error submitting comment:",a)}}},"Submit")))),j&&O&&n.a.createElement("div",{className:"menu",onClick:()=>{N(!y)},ref:_},n.a.createElement("div",{className:"burger-icon"},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null)),y&&n.a.createElement("div",{className:"menu-options"},j===a.user_id.toString()&&n.a.createElement("div",{onClick:()=>{C("/edit-recipe/".concat(a.recipe_id))}},"Edit"),j===a.user_id.toString()&&n.a.createElement("div",{onClick:async()=>{try{await s.a.delete("".concat(i,"/recipes/").concat(a.recipe_id),{headers:{Authorization:"Bearer ".concat(O)}}),C("/recipes")}catch(e){console.error("Error deleting recipe:",e)}}},"Delete"),w?n.a.createElement("div",{onClick:async()=>{try{await s.a.delete("".concat(i,"/saved/unsave"),{data:{recipeId:a.recipe_id},headers:{Authorization:"Bearer ".concat(O)}}),k(!1)}catch(e){console.error("Error unsaving recipe:",e)}}},"Unsave"):n.a.createElement("div",{onClick:async()=>{try{await s.a.post("".concat(i,"/saved/save"),{recipeId:a.recipe_id},{headers:{Authorization:"Bearer ".concat(O)}}),k(!0)}catch(e){console.error("Error saving recipe:",e)}}},"Save"),n.a.createElement("div",{onClick:()=>{console.log("Reporting recipe or comment.")}},"Report")))):n.a.createElement("div",null,"Loading...")};t(29);var E=()=>{const[e,a]=Object(r.useState)(""),[t,c]=Object(r.useState)(""),[l,m]=Object(r.useState)(""),[u,p]=Object(r.useState)(null),d=Object(o.o)();return n.a.createElement("div",{className:"add-recipe-container"},n.a.createElement("form",{onSubmit:async a=>{a.preventDefault();const r=localStorage.getItem("token"),n=localStorage.getItem("user_id"),c=(new Date).toISOString().slice(0,19).replace("T"," "),o=new FormData;o.append("title",e),o.append("instructions",t),o.append("category",l),o.append("date_created",c),o.append("user_id",n),u&&o.append("image",u);try{await s.a.post("".concat(i,"/recipes/create"),o,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}),d("/recipes")}catch(m){console.error("Error adding recipe:",m)}},className:"add-recipe-form"},n.a.createElement("h2",null,"Add a New Recipe"),n.a.createElement("label",null,"Title"),n.a.createElement("input",{type:"text",value:e,onChange:e=>a(e.target.value),required:!0}),n.a.createElement("label",null,"Instructions"),n.a.createElement("textarea",{value:t,onChange:e=>c(e.target.value),required:!0}),n.a.createElement("label",null,"Category"),n.a.createElement("select",{value:l,onChange:e=>m(e.target.value),required:!0},n.a.createElement("option",{value:""},"Select a category"),n.a.createElement("option",{value:"Salads"},"Salads"),n.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),n.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),n.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),n.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),n.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),n.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),n.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),n.a.createElement("label",null,"Image"),n.a.createElement("input",{type:"file",onChange:e=>p(e.target.files[0])}),n.a.createElement("div",{className:"button-group"},n.a.createElement("button",{type:"button",className:"cancel-button",onClick:()=>d(-1)},"Cancel"),n.a.createElement("button",{type:"submit",className:"add-recipe-button"},"Add Recipe"))))};var v=()=>{const[e,a]=Object(r.useState)([]);return Object(r.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await s.a.get("".concat(i,"/messages"),{headers:{Authorization:"Bearer ".concat(e)}});a(t.data)}catch(e){console.error("Error fetching messages:",e)}})()},[]),n.a.createElement("div",null,n.a.createElement("h1",null,"Messages"),n.a.createElement("ul",null,e.map(e=>n.a.createElement("li",{key:e.message_id},n.a.createElement("p",null,e.content)))))};var h=()=>{const[e,a]=Object(r.useState)([]);return Object(r.useEffect)(()=>{s.a.get("".concat(i,"/achievements"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>{a(e.data)}).catch(e=>{console.error("Error fetching achievements:",e)})},[]),n.a.createElement("div",null,n.a.createElement("h1",null,"Achievements"),n.a.createElement("ul",null,e.map(e=>n.a.createElement("li",{key:e.achievement_id},n.a.createElement("p",null,e.title),n.a.createElement("p",null,e.description)))))};t(30);var f=()=>{const[e,a]=Object(r.useState)(""),[t,c]=Object(r.useState)(""),[l,m]=Object(r.useState)(!1),[u,p]=Object(r.useState)(""),d=Object(o.o)();return n.a.createElement("div",{className:"login-container"},n.a.createElement("div",{className:"login-card"},n.a.createElement("h2",{className:"login-title"},"Login"),n.a.createElement("form",{onSubmit:async a=>{a.preventDefault(),p("");try{const{data:a}=await s.a.post("".concat(i,"/users/login"),{username:e,password:t}),{token:r,user:n}=a||{};r&&n&&null!=n.id?(localStorage.setItem("token",r),localStorage.setItem("user_id",String(n.id)),localStorage.setItem("username",n.username),d("/profile")):p("Invalid credentials")}catch(r){console.error("Login error",r),p("Invalid credentials")}},className:"login-form"},u&&n.a.createElement("p",{className:"error-message"},u),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Username:"),n.a.createElement("input",{id:"username",value:e,onChange:e=>a(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{id:"password",type:l?"text":"password",value:t,onChange:e=>c(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group show-password"},n.a.createElement("input",{id:"showPassword",type:"checkbox",checked:l,onChange:()=>m(!l)}),n.a.createElement("label",{htmlFor:"showPassword"},"Show password")),n.a.createElement("button",{type:"submit",className:"login-button"},"Login")),n.a.createElement("button",{type:"button",className:"register-link",onClick:()=>d("/register")},"or Register")))};t(31);var b=()=>{const[e,a]=Object(r.useState)(""),[t,c]=Object(r.useState)(""),[l,m]=Object(r.useState)(""),[u,p]=Object(r.useState)(""),[d,g]=Object(r.useState)(""),[E,v]=Object(r.useState)(""),[h,f]=Object(r.useState)(!1),b=Object(o.o)();return n.a.createElement("div",{className:"register-container"},n.a.createElement("div",{className:"register-card"},n.a.createElement("h2",{className:"register-title"},"Register"),n.a.createElement("form",{onSubmit:async a=>{a.preventDefault();try{const a=await s.a.post("".concat(i,"/users/register"),{username:e,name:t,surname:l,email:u,password:d,country:E,role:"user"});console.log(a.data),b("/login")}catch(r){r.response?console.error("Registration error:",r.response.data):r.request?console.error("No response received:",r.request):console.error("Error:",r.message)}},className:"register-form"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"username"},"Username:"),n.a.createElement("input",{type:"text",id:"username",value:e,onChange:e=>a(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"name"},"Name:"),n.a.createElement("input",{type:"text",id:"name",value:t,onChange:e=>c(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"surname"},"Surname:"),n.a.createElement("input",{type:"text",id:"surname",value:l,onChange:e=>m(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email:"),n.a.createElement("input",{type:"email",id:"email",value:u,onChange:e=>p(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{type:h?"text":"password",id:"password",value:d,onChange:e=>g(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group show-password"},n.a.createElement("input",{type:"checkbox",id:"showPassword",checked:h,onChange:()=>f(!h)}),n.a.createElement("label",{htmlFor:"showPassword"},"Show password")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"country"},"Country:"),n.a.createElement("input",{type:"text",id:"country",value:E,onChange:e=>v(e.target.value),required:!0})),n.a.createElement("button",{type:"submit",className:"register-button"},"Register")),n.a.createElement("button",{className:"login-link-button",onClick:()=>b("/login")},"or Login")))};t(32);var S=()=>{const{id:e}=Object(o.q)(),a=Object(o.o)(),[t,c]=Object(r.useState)(null),[l,u]=Object(r.useState)([]),[p,d]=Object(r.useState)(!1),[g,E]=Object(r.useState)("default.png"),[v,h]=Object(r.useState)(!1),[f,b]=Object(r.useState)({username:"",name:"",surname:"",email:"",password:"",dietaryGoals:""}),S=localStorage.getItem("user_id")||null,y=localStorage.getItem("token"),N=!e||t&&String(t.user_id)===String(S);Object(r.useEffect)(()=>{(async()=>{if(y)try{const t=e||S;if(!t)return void a("/login");const{data:r}=await s.a.get("".concat(i,"/users/").concat(t),{headers:{Authorization:"Bearer ".concat(y)}});c(r),E(r.profile_picture||"default.png"),e||b({username:r.username,name:r.name,surname:r.surname,email:r.email,password:"********",dietaryGoals:r.dietary_goals||""})}catch(t){console.error("Error fetching profile:",t),a("/login")}else a("/login")})()},[e,S,y,a]),Object(r.useEffect)(()=>{(async()=>{if(t)try{const{data:e}=await s.a.get("".concat(i,"/recipes"));u(e.filter(e=>String(e.user_id)===String(t.user_id)))}catch(e){console.error("Error fetching recipes:",e)}})()},[t]);const w=e=>{const{name:a,value:t}=e.target;b(e=>({...e,[a]:t}))},k=()=>h(!1);return t?n.a.createElement("div",{className:"profile-page"},n.a.createElement("h2",null,N?"Profile":"".concat(t.username,"'s Profile")),N&&p?n.a.createElement("div",{className:"edit-form"},n.a.createElement("label",null,"Username:"),n.a.createElement("input",{name:"username",value:f.username,onChange:w}),n.a.createElement("label",null,"Name:"),n.a.createElement("input",{name:"name",value:f.name,onChange:w}),n.a.createElement("label",null,"Surname:"),n.a.createElement("input",{name:"surname",value:f.surname,onChange:w}),n.a.createElement("label",null,"Email:"),n.a.createElement("input",{type:"email",name:"email",value:f.email,onChange:w}),n.a.createElement("label",null,"Password:"),n.a.createElement("input",{type:"password",name:"password",value:f.password,onChange:w,placeholder:"Enter new password or leave blank"}),n.a.createElement("label",null,"Dietary Goals:"),n.a.createElement("textarea",{name:"dietaryGoals",value:f.dietaryGoals,onChange:w,rows:"3",placeholder:"Enter your dietary goals",className:"textarea-dietary-goals"}),n.a.createElement("label",null,"Select Profile Picture:"),n.a.createElement("img",{src:"".concat(m,"/uploads/").concat(g),alt:"Profile",className:"profile-picture",onClick:()=>h(!0)}),n.a.createElement("div",{className:"button-group"},n.a.createElement("div",{className:"button-grouppp"},n.a.createElement("button",{className:"save",onClick:async()=>{const e={username:f.username,name:f.name,surname:f.surname,email:f.email,dietaryGoals:f.dietaryGoals,profilePicture:g};f.password&&"********"!==f.password&&(e.password=f.password);try{await s.a.put("".concat(i,"/users/profile"),e,{headers:{Authorization:"Bearer ".concat(y)}}),c(a=>({...a,...e,dietary_goals:e.dietaryGoals,profile_picture:e.profilePicture,password:a.password})),d(!1)}catch(a){console.error("Error updating profile:",a)}}},"Save"),n.a.createElement("button",{className:"cancel",onClick:()=>{b({username:t.username,name:t.name,surname:t.surname,email:t.email,password:"********",dietaryGoals:t.dietary_goals||""}),E(t.profile_picture||"default.png"),d(!1)}},"Cancel")),n.a.createElement("button",{className:"delete",onClick:async()=>{try{await s.a.delete("".concat(i,"/users/profile"),{headers:{Authorization:"Bearer ".concat(y)}}),localStorage.clear(),a("/login")}catch(e){console.error("Error deleting profile:",e)}}},"Delete Account"))):n.a.createElement("div",{className:"profile-info"},n.a.createElement("img",{src:"".concat(m,"/uploads/").concat(t.profile_picture||"default.png"),alt:"Profile",className:"profile-pic"}),n.a.createElement("p",null,n.a.createElement("strong",null,"Username:")," ",t.username),n.a.createElement("p",null,n.a.createElement("strong",null,"Name:")," ",t.name),n.a.createElement("p",null,n.a.createElement("strong",null,"Surname:")," ",t.surname),n.a.createElement("p",null,n.a.createElement("strong",null,"Email:")," ",t.email),n.a.createElement("p",null,n.a.createElement("strong",null,"Dietary Goals:")," ",t.dietary_goals||"Not specified"),N&&n.a.createElement("button",{className:"edit",onClick:()=>{N&&d(!0)}},"Edit")),n.a.createElement("h3",null,N?"My Recipes":"".concat(t.username,"'s Recipes")),n.a.createElement("div",{className:"recipe-list"},0===l.length?n.a.createElement("p",null,"No recipes found."):l.map(e=>n.a.createElement("div",{key:e.recipe_id,className:"recipe-item",onClick:()=>a("/recipe/".concat(e.recipe_id))},e.image_filename&&n.a.createElement("img",{src:"".concat(m,"/uploads/").concat(e.image_filename),alt:e.title,className:"recipe-image"}),n.a.createElement("div",{className:"recipe-content"},n.a.createElement("h4",null,e.title),n.a.createElement("p",null,(e.instructions||"").substring(0,100),"..."))))),v&&n.a.createElement("div",{className:"picture-modal"},n.a.createElement("div",{className:"picture-grid"},["default.png","profile0.png","profile1.png","profile2.png","profile3.png","profile4.png","profile5.png","profile6.png","profile7.png","profile8.png","profile9.png","profile10.png","profile11.png","profile12.png","profile13.png","profile14.png"].map(e=>n.a.createElement("img",{key:e,src:"".concat(m,"/uploads/").concat(e),alt:"Profile Option",className:"picture-option ".concat(g===e?"selected":""),onClick:()=>E(e)}))),n.a.createElement("div",{className:"modal-actions"},n.a.createElement("button",{onClick:k,className:"close"},"Close"),n.a.createElement("button",{onClick:k,className:"save"},"Save Selection")))):n.a.createElement("div",null,"Loading...")};t(33);var y=()=>{const e=Object(o.o)(),a=null!==localStorage.getItem("token"),t="moderator"===localStorage.getItem("role"),[c,s]=Object(r.useState)("");return Object(r.useEffect)(()=>{const e=()=>{const e=document.querySelector(".header");window.scrollY>50?e.classList.add("header-small"):e.classList.remove("header-small")};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"logo",onClick:()=>{e("/")},style:{cursor:"pointer"}},n.a.createElement("img",{src:"".concat("","/images/logo.png"),alt:"Sweet Swap"}),n.a.createElement("h1",null,"Sweet Swap")),n.a.createElement("form",{onSubmit:a=>{a.preventDefault(),c.trim()&&e("/search?query=".concat(c.trim()))},className:"search-form"},n.a.createElement("input",{type:"text",value:c,onChange:e=>{s(e.target.value)},placeholder:"Search...",className:"search-input"}),n.a.createElement("button",{type:"submit",className:"search-button"},"Search")),n.a.createElement("nav",{className:"navigation"},n.a.createElement(l.b,{to:"/",className:e=>{let{isActive:a}=e;return a?"active":""}},"Home"),n.a.createElement(l.b,{to:"/recipes",className:e=>{let{isActive:a}=e;return a?"active":""}},"Recipes"),a&&n.a.createElement(l.b,{to:"/profile",className:e=>{let{isActive:a}=e;return a?"active":""}},"Profile"),a&&t&&n.a.createElement(l.b,{to:"/moderate",className:e=>{let{isActive:a}=e;return a?"active":""}},"Moderate"),n.a.createElement(l.b,{to:"/contact",className:e=>{let{isActive:a}=e;return a?"active":""}},"Contact"),!a&&n.a.createElement(l.b,{to:"/login",className:e=>{let{isActive:a}=e;return a?"active":""}},"Login"),!a&&n.a.createElement(l.b,{to:"/register",className:e=>{let{isActive:a}=e;return a?"active":""}},"Register"),a&&n.a.createElement("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),e("/login")},className:"logout-button"},"Logout")))};t(34);var N=()=>n.a.createElement("footer",{className:"footer"},n.a.createElement("div",{className:"social-links"}),n.a.createElement("div",{className:"footer-separator"}),n.a.createElement("p",null,"\xa9 2026 Sweet Swap"));t(35);var w=()=>{const[e,a]=Object(r.useState)({name:"",email:"",message:""}),{name:t,email:c,message:l}=e,o=t=>{a({...e,[t.target.name]:t.target.value})};return n.a.createElement("div",{className:"contact-container"},n.a.createElement("div",{className:"contact-details"},n.a.createElement("h2",null,"Contact us"),n.a.createElement("p",null,"If you have any questions about our recipes or even suggestions, don't hesitate to contact us. We are looking forward to hearing from you!"),n.a.createElement("p",null,"E-mail: support@gmail.com")),n.a.createElement("div",{className:"contact-card"},n.a.createElement("h2",{className:"contact-title"},"Send us a message!"),n.a.createElement("form",{className:"contact-form",onSubmit:async t=>{t.preventDefault();try{await s.a.post("".concat(i,"/contact"),e),alert("Message sent successfully"),a({name:"",email:"",message:""})}catch(r){console.error(r),alert("Error sending message")}}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"name"},"Name:"),n.a.createElement("input",{type:"text",id:"name",name:"name",value:t,onChange:o,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email:"),n.a.createElement("input",{type:"email",id:"email",name:"email",value:c,onChange:o,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"message"},"Message:"),n.a.createElement("textarea",{id:"message",name:"message",value:l,onChange:o,required:!0})),n.a.createElement("button",{type:"submit",className:"contact-button"},"Send Message"))))};t(36);var k=()=>{const{id:e}=Object(o.q)(),[a,t]=Object(r.useState)(""),[c,l]=Object(r.useState)(""),[m,u]=Object(r.useState)(""),[p,d]=Object(r.useState)(null),g=Object(o.o)();Object(r.useEffect)(()=>{(async()=>{try{const a=(await s.a.get("".concat(i,"/recipes/").concat(e))).data;t(a.title),l(a.instructions),u(a.category)}catch(a){console.error("Error fetching recipe details:",a)}})()},[e]);return n.a.createElement("div",{className:"edit-recipe-container"},n.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const r=localStorage.getItem("token"),n=new FormData;n.append("title",a),n.append("instructions",c),n.append("category",m),p&&n.append("image",p);try{await s.a.put("".concat(i,"/recipes/").concat(e),n,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}),g("/recipe/".concat(e))}catch(l){console.error("Error updating recipe:",l)}},className:"edit-recipe-form"},n.a.createElement("h2",null,"Edit Recipe"),n.a.createElement("label",null,"Title"),n.a.createElement("input",{type:"text",value:a,onChange:e=>t(e.target.value),required:!0}),n.a.createElement("label",null,"Instructions"),n.a.createElement("textarea",{value:c,onChange:e=>l(e.target.value),required:!0}),n.a.createElement("label",null,"Category"),n.a.createElement("select",{value:m,onChange:e=>u(e.target.value),required:!0},n.a.createElement("option",{value:""},"Select a category"),n.a.createElement("option",{value:"Salads"},"Salads"),n.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),n.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),n.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),n.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),n.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),n.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),n.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),n.a.createElement("label",null,"Image"),n.a.createElement("input",{type:"file",onChange:e=>d(e.target.files[0])}),n.a.createElement("div",{className:"button-group"},n.a.createElement("button",{type:"button",className:"cancel-button",onClick:()=>g(-1)},"Cancel"),n.a.createElement("button",{type:"submit",className:"edit-recipe-button"},"Save Changes"))))};t(37);var C=()=>{const[e,a]=Object(r.useState)([]),t=Object(o.m)();return Object(r.useEffect)(()=>{(async()=>{const e=new URLSearchParams(t.search).get("query");if(e)try{const t=await s.a.get("".concat(i,"/recipes/search"),{params:{query:e}});a(t.data)}catch(r){console.error("Error fetching search results:",r)}else a([])})()},[t.search]),n.a.createElement("div",{className:"search-results"},e.length>0?n.a.createElement("div",{className:"search-results-container"},e.map(e=>n.a.createElement(p,{key:e.recipe_id,recipe:e}))):n.a.createElement("p",null,"No results found for your search."))};var j=()=>n.a.createElement(l.a,null,n.a.createElement(y,null),n.a.createElement(o.c,null,n.a.createElement(o.a,{exact:!0,path:"/",element:n.a.createElement(u,null)}),n.a.createElement(o.a,{path:"/recipes",element:n.a.createElement(d,null)}),n.a.createElement(o.a,{path:"/recipe/:id",element:n.a.createElement(g,null)}),n.a.createElement(o.a,{path:"/add-recipe",element:n.a.createElement(E,null)}),n.a.createElement(o.a,{path:"/messages",element:n.a.createElement(v,null)}),n.a.createElement(o.a,{path:"/achievements",element:n.a.createElement(h,null)}),n.a.createElement(o.a,{path:"/login",element:n.a.createElement(f,null)}),n.a.createElement(o.a,{path:"/register",element:n.a.createElement(b,null)}),n.a.createElement(o.a,{path:"/profile",element:n.a.createElement(S,null)})," ",n.a.createElement(o.a,{path:"/user/:id",element:n.a.createElement(S,null)})," ",n.a.createElement(o.a,{path:"/contact",element:n.a.createElement(w,null)}),n.a.createElement(o.a,{path:"/recipes/category/:category",element:n.a.createElement(d,null)}),n.a.createElement(o.a,{path:"/edit-recipe/:id",element:n.a.createElement(k,null)}),n.a.createElement(o.a,{path:"/search",element:n.a.createElement(C,null)})),n.a.createElement(N,null));t(38);s.a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.error("Unauthorized access - Redirecting to login."),localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));const O=document.getElementById("root");Object(c.createRoot)(O).render(n.a.createElement(j,null))}],[[13,1,2]]]);
//# sourceMappingURL=main.b162bebe.chunk.js.map