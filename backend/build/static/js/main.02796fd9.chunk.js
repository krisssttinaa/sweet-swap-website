(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,,,,,,,,function(e,a,t){e.exports=t(39)},,,,,,,,function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var r=t(0),l=t.n(r),n=t(12),c=t(5),o=t(3),s=t(40);t(21);var i=()=>{const[e,a]=Object(r.useState)([]),t=Object(o.o)();Object(r.useEffect)(()=>{(async()=>{try{const e=await s.a.get("http://localhost:8288/api/recipes/newest");a(e.data)}catch(e){console.error("Error fetching recipes:",e)}})()},[]);const n=e=>{t("/recipes/category/".concat(e))};return l.a.createElement("div",{className:"home"},l.a.createElement("header",{className:"home-header"},l.a.createElement("div",{className:"hero-image"},l.a.createElement("div",{className:"hero-text"},l.a.createElement("p",null,"Explore the world of sugar-free food")))),l.a.createElement("section",{className:"home-recipes"},l.a.createElement("div",{className:"recipe-categories"},l.a.createElement("div",{className:"category",onClick:()=>n("Salads")},l.a.createElement("img",{src:"/images/salad.jpg",alt:"Salads"}),l.a.createElement("p",null,"Salads")),l.a.createElement("div",{className:"category",onClick:()=>n("Vegetarian Dishes")},l.a.createElement("img",{src:"/images/vegetarian.jpg",alt:"Vegetarian Dishes"}),l.a.createElement("p",null,"Vegetarian Dishes")),l.a.createElement("div",{className:"category",onClick:()=>n("Low-Sugar Snacks")},l.a.createElement("img",{src:"/images/snacks.jpg",alt:"Low-Sugar Snacks"}),l.a.createElement("p",null,"Low-Sugar Snacks")),l.a.createElement("div",{className:"category",onClick:()=>n("Sugar-Free Desserts")},l.a.createElement("img",{src:"/images/sugar-free-desserts.jpg",alt:"Sugar-Free Desserts"}),l.a.createElement("p",null,"Sugar-Free Desserts")),l.a.createElement("div",{className:"category",onClick:()=>n("Healthy Beverages")},l.a.createElement("img",{src:"/images/beverages.jpg",alt:"Healthy Beverages"}),l.a.createElement("p",null,"Healthy Beverages")),l.a.createElement("div",{className:"category",onClick:()=>n("Low-Sugar Desserts")},l.a.createElement("img",{src:"/images/low-sugar-desserts.jpg",alt:"Low-Sugar Desserts"}),l.a.createElement("p",null,"Low-Sugar Desserts")),l.a.createElement("div",{className:"category",onClick:()=>n("Sugar-Free Snacks")},l.a.createElement("img",{src:"/images/sugar-free-snacks.jpg",alt:"Sugar-Free Snacks"}),l.a.createElement("p",null,"Sugar-Free Snacks")),l.a.createElement("div",{className:"category",onClick:()=>n("Non-Vegetarian Food")},l.a.createElement("img",{src:"/images/non-vegetarian.jpg",alt:"Non-Vegetarian Food"}),l.a.createElement("p",null,"Non-Vegetarian Food")))),l.a.createElement("section",{className:"home-new-recipes"},l.a.createElement("h2",null,"New recipes"),l.a.createElement("div",{className:"new-recipes-list"},e.length>0?e.map(e=>l.a.createElement("div",{className:"recipe-card",key:e.recipe_id},e.image_filename&&l.a.createElement("img",{src:"http://localhost:8288/uploads/".concat(e.image_filename),alt:e.title}),l.a.createElement("h3",null,e.title),l.a.createElement("button",{onClick:()=>{return a=e.recipe_id,void t("/recipe/".concat(a));var a}},"Recipe"))):l.a.createElement("p",null,"No recipes found."))))};t(26);var m=e=>{let{recipe:a,fetchRecipes:t}=e;const[n,c]=Object(r.useState)(!1),[i,m]=Object(r.useState)(!1),u=Object(o.o)(),p=localStorage.getItem("user_id");Object(r.useEffect)(()=>{(async()=>{try{const e=(await s.a.get("http://localhost:8288/api/saved/saved",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})).data;m(e.some(e=>e.recipe_id===a.recipe_id))}catch(e){console.error("Error checking saved status",e)}})()},[a.recipe_id]);return l.a.createElement("div",{className:"recipe-card",onClick:()=>{u("/recipe/".concat(a.recipe_id))}},a.image_filename&&l.a.createElement("img",{src:"http://localhost:8288/uploads/".concat(a.image_filename),alt:a.title,className:"recipe-image"}),l.a.createElement("div",{className:"recipe-content"},l.a.createElement("h4",null,a.title),l.a.createElement("p",null,a.instructions.substring(0,100),"...")),l.a.createElement("div",{className:"menu",onClick:e=>{e.stopPropagation(),c(!n)}},"\u2630",n&&l.a.createElement("div",{className:"menu-options"},p&&parseInt(p)===a.user_id&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:()=>{u("/edit-recipe/".concat(a.recipe_id))}},"Edit"),l.a.createElement("div",{onClick:async()=>{const e=localStorage.getItem("token");try{await s.a.delete("http://localhost:8288/api/recipes/".concat(a.recipe_id),{headers:{Authorization:"Bearer ".concat(e)}}),t()}catch(r){console.error("Error deleting recipe:",r)}}},"Delete")),i?l.a.createElement("div",{onClick:async()=>{try{await s.a.delete("http://localhost:8288/api/saved/unsave",{data:{recipeId:a.recipe_id},headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),m(!1),console.log("Recipe unsaved")}catch(e){console.error("Error unsaving recipe",e)}}},"Unsave"):l.a.createElement("div",{onClick:async()=>{try{await s.a.post("http://localhost:8288/api/saved/save",{recipeId:a.recipe_id},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),m(!0),console.log("Recipe saved")}catch(e){console.error("Error saving recipe",e)}}},"Save"),l.a.createElement("div",{onClick:()=>{console.log("Report recipe")}},"Report"))))};t(27);var u=()=>{const{category:e}=Object(o.q)(),[a,t]=Object(r.useState)([]),[n,c]=Object(r.useState)("all"),[i,u]=Object(r.useState)(!1),[p,d]=Object(r.useState)(e||"all"),g=Object(o.o)();Object(r.useEffect)(()=>{localStorage.getItem("token")&&u(!0)},[]);const E=Object(r.useCallback)(async()=>{const e=localStorage.getItem("token"),a=localStorage.getItem("user_id");try{let r;if("saved"===n)r=await s.a.get("http://localhost:8288/api/saved/saved",{headers:{Authorization:"Bearer ".concat(e)}}),"all"!==p&&(r={data:r.data.filter(e=>e.category===p)});else if("my"===n){if(!a)return void console.error("No user ID found. Cannot fetch user-specific recipes.");r=await s.a.get("http://localhost:8288/api/recipes",{headers:{Authorization:"Bearer ".concat(e)}}),r={data:r.data.filter(e=>e.user_id===parseInt(a)&&("all"===p||e.category===p))}}else r="all"===p?await s.a.get("http://localhost:8288/api/recipes"):await s.a.get("http://localhost:8288/api/recipes/category/".concat(p));t(r.data)}catch(r){console.error("Error fetching recipes:",r)}},[n,p]);Object(r.useEffect)(()=>{e&&d(e)},[e]),Object(r.useEffect)(()=>{E()},[E]);return l.a.createElement("div",{className:"recipe-list"},l.a.createElement("div",{className:"tabs"},l.a.createElement("button",{className:"saved"===n?"active":"",onClick:()=>c("saved")},"Saved Recipes"),l.a.createElement("button",{className:"all"===n?"active":"",onClick:()=>c("all")},"All Recipes"),l.a.createElement("button",{className:"my"===n?"active":"",onClick:()=>c("my")},"My Recipes")),l.a.createElement("div",{className:"recipe-header"},l.a.createElement("div",{className:"recipe-actions"},l.a.createElement("select",{className:"category-select",value:p,onChange:e=>{return a=e.target.value,d(a),void g("all"===a?"/recipes":"/recipes/category/".concat(a));var a}},l.a.createElement("option",{value:"all"},"All"),l.a.createElement("option",{value:"Salads"},"Salads"),l.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),l.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),l.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),l.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),l.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),l.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),l.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),i&&l.a.createElement("button",{className:"add-recipe-button",onClick:()=>{g("/add-recipe")}},"+ Add Recipe"))),l.a.createElement("div",{className:"recipes-container"},a.length>0?a.map(e=>l.a.createElement(m,{key:e.recipe_id,recipe:e,fetchRecipes:E})):l.a.createElement("p",null,"No recipes found.")))};t(28);var p=()=>{const{id:e}=Object(o.q)(),[a,t]=Object(r.useState)(null),[n,c]=Object(r.useState)(""),[i,m]=Object(r.useState)("default.png"),[u,p]=Object(r.useState)([]),[d,g]=Object(r.useState)(""),[E,h]=Object(r.useState)(null),[v,f]=Object(r.useState)(""),[b,S]=Object(r.useState)(!1),[y,N]=Object(r.useState)(!1),w=Object(o.o)(),k=localStorage.getItem("user_id"),C=localStorage.getItem("token"),j=Object(r.useRef)(null),O=Object(r.useCallback)(async()=>{try{const a=await s.a.get("http://localhost:8288/api/comments/recipe/".concat(e),{headers:{Authorization:"Bearer ".concat(C)}});if(a.data&&Array.isArray(a.data)){const e=await Promise.all(a.data.map(async e=>{const a=await s.a.get("http://localhost:8288/api/users/".concat(e.user_id));return{...e,profile_picture:a.data.profile_picture||"default.png"}}));p(e)}}catch(a){console.error("Error fetching comments:",a)}},[e,C]);Object(r.useEffect)(()=>{(async()=>{try{const a=await s.a.get("http://localhost:8288/api/recipes/".concat(e));if(t(a.data),a.data.user_id){const e=await s.a.get("http://localhost:8288/api/users/".concat(a.data.user_id));c(e.data.username),m(e.data.profile_picture||"default.png")}if(C){const e=(await s.a.get("http://localhost:8288/api/saved/saved",{headers:{Authorization:"Bearer ".concat(C)}})).data;N(e.some(e=>e.recipe_id===a.data.recipe_id))}O()}catch(a){console.error("Error fetching recipe:",a)}})()},[e,C,O,k]);const _=async()=>{if(""!==v.trim())try{await s.a.put("http://localhost:8288/api/comments/".concat(E),{content:v},{headers:{Authorization:"Bearer ".concat(C)}}),O(),h(null),f("")}catch(e){console.error("Error updating comment:",e)}},D=e=>{j.current&&!j.current.contains(e.target)&&S(!1)};Object(r.useEffect)(()=>(b?document.addEventListener("mousedown",D):document.removeEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}),[b]);const F=e=>{const a=k===e.toString()?"/profile":"/user/".concat(e);w(a)};return a?l.a.createElement("div",{className:"recipe-details"},l.a.createElement("img",{className:"recipe-img",src:"http://localhost:8288/uploads/".concat(a.image_filename),alt:a.title}),l.a.createElement("div",{className:"recipe-info"},l.a.createElement("h2",null,a.title),l.a.createElement("p",{className:"author"},l.a.createElement("img",{src:"http://localhost:8288/uploads/".concat(i),alt:"Profile",className:"profile-picture"}),l.a.createElement("span",{onClick:()=>F(a.user_id),className:"username"},n)),a.products&&a.products.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Products"),l.a.createElement("ul",{className:"products-txt"},a.products.map(e=>l.a.createElement("li",{key:e.product_id},l.a.createElement("strong",null,e.name),l.a.createElement("br",null),l.a.createElement("em",null,e.description),l.a.createElement("br",null),"Price: ",e.price,", Brand: ",e.brand,", Shop: ",e.shop)))),l.a.createElement("h3",null,"Instructions"),l.a.createElement("p",{className:"instructions-txt"},a.instructions),l.a.createElement("h3",null,"Comments"),l.a.createElement("div",{className:"comments-section"},u.length>0?u.map((e,a)=>l.a.createElement("div",{key:e.comment_id||a,className:"comment"},l.a.createElement("img",{src:"http://localhost:8288/uploads/".concat(e.profile_picture),alt:e.username,className:"profile-picture"}),E===e.comment_id?l.a.createElement("div",null,l.a.createElement("textarea",{value:v,onChange:e=>f(e.target.value)}),l.a.createElement("button",{onClick:_},"Update"),l.a.createElement("button",{onClick:()=>h(null)},"Cancel")):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("span",{onClick:()=>F(e.user_id),className:"username clickable-username"},e.username),": ",e.content),l.a.createElement("div",{className:"comments-details"},l.a.createElement("small",null,"Commented on: ",e.date_commented?new Date(e.date_commented).toLocaleString():"Date not available"),e.user_id===parseInt(k)&&l.a.createElement("div",{className:"comments-buttons-change"},l.a.createElement("button",{onClick:()=>{return a=e.comment_id,t=e.content,h(a),void f(t);var a,t}},"Edit"),l.a.createElement("button",{onClick:()=>(async e=>{try{await s.a.delete("http://localhost:8288/api/comments/".concat(e),{headers:{Authorization:"Bearer ".concat(C)}}),O()}catch(a){console.error("Error deleting comment:",a)}})(e.comment_id)},"Delete")))))):l.a.createElement("p",null,"No comments yet."),l.a.createElement("div",{className:"add-comment"},l.a.createElement("textarea",{value:d,onChange:e=>{g(e.target.value)},placeholder:"Add a comment...",rows:"3"}),l.a.createElement("button",{onClick:async()=>{if(""!==d.trim())try{await s.a.post("http://localhost:8288/api/comments",{recipe_id:e,user_id:k,content:d},{headers:{Authorization:"Bearer ".concat(C)}}),O(),g("")}catch(a){console.error("Error submitting comment:",a)}}},"Submit")))),k&&C&&l.a.createElement("div",{className:"menu",onClick:()=>{S(!b)},ref:j},l.a.createElement("div",{className:"burger-icon"},l.a.createElement("span",null),l.a.createElement("span",null),l.a.createElement("span",null)),b&&l.a.createElement("div",{className:"menu-options"},k===a.user_id.toString()&&l.a.createElement("div",{onClick:()=>{w("/edit-recipe/".concat(a.recipe_id))}},"Edit"),k===a.user_id.toString()&&l.a.createElement("div",{onClick:async()=>{try{await s.a.delete("http://localhost:8288/api/recipes/".concat(a.recipe_id),{headers:{Authorization:"Bearer ".concat(C)}}),w("/recipes")}catch(e){console.error("Error deleting recipe:",e)}}},"Delete"),y?l.a.createElement("div",{onClick:async()=>{try{await s.a.delete("http://localhost:8288/api/saved/unsave",{data:{recipeId:a.recipe_id},headers:{Authorization:"Bearer ".concat(C)}}),N(!1)}catch(e){console.error("Error unsaving recipe:",e)}}},"Unsave"):l.a.createElement("div",{onClick:async()=>{try{await s.a.post("http://localhost:8288/api/saved/save",{recipeId:a.recipe_id},{headers:{Authorization:"Bearer ".concat(C)}}),N(!0)}catch(e){console.error("Error saving recipe:",e)}}},"Save"),l.a.createElement("div",{onClick:()=>{console.log("Reporting recipe or comment.")}},"Report")))):l.a.createElement("div",null,"Loading...")};t(29);var d=()=>{const[e,a]=Object(r.useState)(""),[t,n]=Object(r.useState)(""),[c,i]=Object(r.useState)(""),[m,u]=Object(r.useState)(null),p=Object(o.o)();return l.a.createElement("div",{className:"add-recipe-container"},l.a.createElement("form",{onSubmit:async a=>{a.preventDefault();const r=localStorage.getItem("token"),l=localStorage.getItem("user_id"),n=(new Date).toISOString().slice(0,19).replace("T"," "),o=new FormData;o.append("title",e),o.append("instructions",t),o.append("category",c),o.append("date_created",n),m&&o.append("image",m),o.append("user_id",l);try{await s.a.post("http://localhost:8288/api/recipes/create",o,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}),p("/recipes")}catch(i){console.error("Error adding recipe:",i)}},className:"add-recipe-form"},l.a.createElement("h2",null,"Add a New Recipe"),l.a.createElement("label",null,"Title"),l.a.createElement("input",{type:"text",value:e,onChange:e=>a(e.target.value),required:!0}),l.a.createElement("label",null,"Instructions"),l.a.createElement("textarea",{value:t,onChange:e=>n(e.target.value),required:!0}),l.a.createElement("label",null,"Category"),l.a.createElement("select",{value:c,onChange:e=>i(e.target.value),required:!0},l.a.createElement("option",{value:""},"Select a category"),l.a.createElement("option",{value:"Salads"},"Salads"),l.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),l.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),l.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),l.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),l.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),l.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),l.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),l.a.createElement("label",null,"Image"),l.a.createElement("input",{type:"file",onChange:e=>u(e.target.files[0])}),l.a.createElement("div",{className:"button-group"},l.a.createElement("button",{type:"button",className:"cancel-button",onClick:()=>p(-1)},"Cancel"),l.a.createElement("button",{type:"submit",className:"add-recipe-button"},"Add Recipe"))))};var g=()=>{const[e,a]=Object(r.useState)([]);return Object(r.useEffect)(()=>{s.a.get("/api/messages").then(e=>{a(e.data)}).catch(e=>{console.error("Error fetching messages:",e)})},[]),l.a.createElement("div",null,l.a.createElement("h1",null,"Messages"),l.a.createElement("ul",null,e.map(e=>l.a.createElement("li",{key:e.message_id},l.a.createElement("p",null,e.content)))))};var E=()=>{const[e,a]=Object(r.useState)([]);return Object(r.useEffect)(()=>{s.a.get("/api/achievements").then(e=>{a(e.data)}).catch(e=>{console.error("Error fetching achievements:",e)})},[]),l.a.createElement("div",null,l.a.createElement("h1",null,"Achievements"),l.a.createElement("ul",null,e.map(e=>l.a.createElement("li",{key:e.achievement_id},l.a.createElement("p",null,e.title),l.a.createElement("p",null,e.description)))))};t(30);var h=()=>{const[e,a]=Object(r.useState)(""),[t,n]=Object(r.useState)(""),[c,i]=Object(r.useState)(!1),[m,u]=Object(r.useState)(""),p=Object(o.o)();return l.a.createElement("div",{className:"login-container"},l.a.createElement("div",{className:"login-card"},l.a.createElement("h2",{className:"login-title"},"Login"),l.a.createElement("form",{onSubmit:async a=>{a.preventDefault(),u("");try{const{data:a}=await s.a.post("http://localhost:8288/api/users/login",{username:e,password:t}),{token:r,user:l}=a||{};r&&l&&null!=l.id?(localStorage.setItem("token",r),localStorage.setItem("user_id",String(l.id)),localStorage.setItem("username",l.username),p("/profile")):u("Invalid credentials")}catch(r){console.error("Login error",r),u("Invalid credentials")}},className:"login-form"},m&&l.a.createElement("p",{className:"error-message"},m),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username"},"Username:"),l.a.createElement("input",{id:"username",value:e,onChange:e=>a(e.target.value),required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password:"),l.a.createElement("input",{id:"password",type:c?"text":"password",value:t,onChange:e=>n(e.target.value),required:!0})),l.a.createElement("div",{className:"form-group show-password"},l.a.createElement("input",{id:"showPassword",type:"checkbox",checked:c,onChange:()=>i(!c)}),l.a.createElement("label",{htmlFor:"showPassword"},"Show password")),l.a.createElement("button",{type:"submit",className:"login-button"},"Login")),l.a.createElement("button",{type:"button",className:"register-link",onClick:()=>p("/register")},"or Register")))};t(31);var v=()=>{const[e,a]=Object(r.useState)(""),[t,n]=Object(r.useState)(""),[c,i]=Object(r.useState)(""),[m,u]=Object(r.useState)(""),[p,d]=Object(r.useState)(""),[g,E]=Object(r.useState)(""),[h,v]=Object(r.useState)(!1),f=Object(o.o)();return l.a.createElement("div",{className:"register-container"},l.a.createElement("div",{className:"register-card"},l.a.createElement("h2",{className:"register-title"},"Register"),l.a.createElement("form",{onSubmit:async a=>{a.preventDefault();try{const a=await s.a.post("http://localhost:8288/api/users/register",{username:e,name:t,surname:c,email:m,password:p,country:g,role:"user"});f("/login"),console.log(a.data)}catch(r){r.response?console.error("Registration error:",r.response.data):r.request?console.error("No response received:",r.request):console.error("Error:",r.message)}},className:"register-form"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"username"},"Username:"),l.a.createElement("input",{type:"text",id:"username",value:e,onChange:e=>a(e.target.value),required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Name:"),l.a.createElement("input",{type:"text",id:"name",value:t,onChange:e=>n(e.target.value),required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"surname"},"Surname:"),l.a.createElement("input",{type:"text",id:"surname",value:c,onChange:e=>i(e.target.value),required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email:"),l.a.createElement("input",{type:"email",id:"email",value:m,onChange:e=>u(e.target.value),required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"password"},"Password:"),l.a.createElement("input",{type:h?"text":"password",id:"password",value:p,onChange:e=>d(e.target.value),required:!0})),l.a.createElement("div",{className:"form-group show-password"},l.a.createElement("input",{type:"checkbox",id:"showPassword",checked:h,onChange:()=>v(!h)}),l.a.createElement("label",{htmlFor:"showPassword"},"Show password")),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"country"},"Country:"),l.a.createElement("input",{type:"text",id:"country",value:g,onChange:e=>E(e.target.value),required:!0})),l.a.createElement("button",{type:"submit",className:"register-button"},"Register")),l.a.createElement("button",{className:"login-link-button",onClick:()=>f("/login")},"or Login")))};t(32);var f=()=>{const{id:e}=Object(o.q)(),a=Object(o.o)(),[t,n]=Object(r.useState)(null),[c,i]=Object(r.useState)([]),[m,u]=Object(r.useState)(!1),[p,d]=Object(r.useState)("default.png"),[g,E]=Object(r.useState)(!1),[h,v]=Object(r.useState)({username:"",name:"",surname:"",email:"",password:"",dietaryGoals:""}),f=localStorage.getItem("user_id")||null,b=localStorage.getItem("token"),S=!e||t&&String(t.user_id)===String(f);Object(r.useEffect)(()=>{(async()=>{if(b)try{const t=e||f;if(!t)return void a("/login");const{data:r}=await s.a.get("http://localhost:8288/api/users/".concat(t),{headers:{Authorization:"Bearer ".concat(b)}});n(r),d(r.profile_picture||"default.png"),e||v({username:r.username,name:r.name,surname:r.surname,email:r.email,password:"********",dietaryGoals:r.dietary_goals||""})}catch(t){console.error("Error fetching profile:",t),a("/login")}else a("/login")})()},[e,f,b,a]),Object(r.useEffect)(()=>{(async()=>{if(t)try{const{data:e}=await s.a.get("http://localhost:8288/api/recipes");i(e.filter(e=>String(e.user_id)===String(t.user_id)))}catch(e){console.error("Error fetching recipes:",e)}})()},[t]);const y=e=>{const{name:a,value:t}=e.target;v(e=>({...e,[a]:t}))},N=()=>E(!1);return t?l.a.createElement("div",{className:"profile-page"},l.a.createElement("h2",null,S?"Profile":"".concat(t.username,"'s Profile")),S&&m?l.a.createElement("div",{className:"edit-form"},l.a.createElement("label",null,"Username:"),l.a.createElement("input",{name:"username",value:h.username,onChange:y}),l.a.createElement("label",null,"Name:"),l.a.createElement("input",{name:"name",value:h.name,onChange:y}),l.a.createElement("label",null,"Surname:"),l.a.createElement("input",{name:"surname",value:h.surname,onChange:y}),l.a.createElement("label",null,"Email:"),l.a.createElement("input",{type:"email",name:"email",value:h.email,onChange:y}),l.a.createElement("label",null,"Password:"),l.a.createElement("input",{type:"password",name:"password",value:h.password,onChange:y,placeholder:"Enter new password or leave blank"}),l.a.createElement("label",null,"Dietary Goals:"),l.a.createElement("textarea",{name:"dietaryGoals",value:h.dietaryGoals,onChange:y,rows:"3",placeholder:"Enter your dietary goals",className:"textarea-dietary-goals"}),l.a.createElement("label",null,"Select Profile Picture:"),l.a.createElement("img",{src:"http://localhost:8288/uploads/".concat(p),alt:"Profile",className:"profile-picture",onClick:()=>E(!0)}),l.a.createElement("div",{className:"button-group"},l.a.createElement("div",{className:"button-grouppp"},l.a.createElement("button",{className:"save",onClick:async()=>{const e={username:h.username,name:h.name,surname:h.surname,email:h.email,dietaryGoals:h.dietaryGoals,profilePicture:p};h.password&&"********"!==h.password&&(e.password=h.password);try{await s.a.put("http://localhost:8288/api/users/profile",e,{headers:{Authorization:"Bearer ".concat(b)}}),n(a=>({...a,...e,dietary_goals:e.dietaryGoals,profile_picture:e.profilePicture,password:a.password})),u(!1)}catch(a){console.error("Error updating profile:",a)}}},"Save"),l.a.createElement("button",{className:"cancel",onClick:()=>{v({username:t.username,name:t.name,surname:t.surname,email:t.email,password:"********",dietaryGoals:t.dietary_goals||""}),d(t.profile_picture||"default.png"),u(!1)}},"Cancel")),l.a.createElement("button",{className:"delete",onClick:async()=>{try{await s.a.delete("http://localhost:8288/api/users/profile",{headers:{Authorization:"Bearer ".concat(b)}}),localStorage.clear(),a("/login")}catch(e){console.error("Error deleting profile:",e)}}},"Delete Account"))):l.a.createElement("div",{className:"profile-info"},l.a.createElement("img",{src:"http://localhost:8288/uploads/".concat(t.profile_picture||"default.png"),alt:"Profile",className:"profile-pic"}),l.a.createElement("p",null,l.a.createElement("strong",null,"Username:")," ",t.username),l.a.createElement("p",null,l.a.createElement("strong",null,"Name:")," ",t.name),l.a.createElement("p",null,l.a.createElement("strong",null,"Surname:")," ",t.surname),l.a.createElement("p",null,l.a.createElement("strong",null,"Email:")," ",t.email),l.a.createElement("p",null,l.a.createElement("strong",null,"Dietary Goals:")," ",t.dietary_goals||"Not specified"),S&&l.a.createElement("button",{className:"edit",onClick:()=>{S&&u(!0)}},"Edit")),l.a.createElement("h3",null,S?"My Recipes":"".concat(t.username,"'s Recipes")),l.a.createElement("div",{className:"recipe-list"},0===c.length?l.a.createElement("p",null,"No recipes found."):c.map(e=>l.a.createElement("div",{key:e.recipe_id,className:"recipe-item",onClick:()=>a("/recipe/".concat(e.recipe_id))},e.image_filename&&l.a.createElement("img",{src:"http://localhost:8288/uploads/".concat(e.image_filename),alt:e.title,className:"recipe-image"}),l.a.createElement("div",{className:"recipe-content"},l.a.createElement("h4",null,e.title),l.a.createElement("p",null,(e.instructions||"").substring(0,100),"..."))))),g&&l.a.createElement("div",{className:"picture-modal"},l.a.createElement("div",{className:"picture-grid"},["default.png","profile0.png","profile1.png","profile2.png","profile3.png","profile4.png","profile5.png","profile6.png","profile7.png","profile8.png","profile9.png","profile10.png","profile11.png","profile12.png","profile13.png","profile14.png"].map(e=>l.a.createElement("img",{key:e,src:"http://localhost:8288/uploads/".concat(e),alt:"Profile Option",className:"picture-option ".concat(p===e?"selected":""),onClick:()=>d(e)}))),l.a.createElement("div",{className:"modal-actions"},l.a.createElement("button",{onClick:N,className:"close"},"Close"),l.a.createElement("button",{onClick:N,className:"save"},"Save Selection")))):l.a.createElement("div",null,"Loading...")};t(33);var b=()=>{const e=Object(o.o)(),a=null!==localStorage.getItem("token"),t="moderator"===localStorage.getItem("role"),[n,s]=Object(r.useState)("");return Object(r.useEffect)(()=>{const e=()=>{const e=document.querySelector(".header");window.scrollY>50?e.classList.add("header-small"):e.classList.remove("header-small")};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),l.a.createElement("header",{className:"header"},l.a.createElement("div",{className:"logo",onClick:()=>{e("/")},style:{cursor:"pointer"}},l.a.createElement("img",{src:"".concat("","/images/logo.png"),alt:"Sweet Swap"}),l.a.createElement("h1",null,"Sweet Swap")),l.a.createElement("form",{onSubmit:a=>{a.preventDefault(),n.trim()&&e("/search?query=".concat(n.trim()))},className:"search-form"},l.a.createElement("input",{type:"text",value:n,onChange:e=>{s(e.target.value)},placeholder:"Search...",className:"search-input"}),l.a.createElement("button",{type:"submit",className:"search-button"},"Search")),l.a.createElement("nav",{className:"navigation"},l.a.createElement(c.b,{to:"/",className:e=>{let{isActive:a}=e;return a?"active":""}},"Home"),l.a.createElement(c.b,{to:"/recipes",className:e=>{let{isActive:a}=e;return a?"active":""}},"Recipes"),a&&l.a.createElement(c.b,{to:"/profile",className:e=>{let{isActive:a}=e;return a?"active":""}},"Profile"),a&&t&&l.a.createElement(c.b,{to:"/moderate",className:e=>{let{isActive:a}=e;return a?"active":""}},"Moderate"),l.a.createElement(c.b,{to:"/contact",className:e=>{let{isActive:a}=e;return a?"active":""}},"Contact"),!a&&l.a.createElement(c.b,{to:"/login",className:e=>{let{isActive:a}=e;return a?"active":""}},"Login"),!a&&l.a.createElement(c.b,{to:"/register",className:e=>{let{isActive:a}=e;return a?"active":""}},"Register"),a&&l.a.createElement("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("role"),e("/login")},className:"logout-button"},"Logout")))};t(34);var S=()=>l.a.createElement("footer",{className:"footer"},l.a.createElement("div",{className:"social-links"}),l.a.createElement("div",{className:"footer-separator"}),l.a.createElement("p",null,"\xa9 2024 Sweet Swap"));t(35);var y=()=>{const[e,a]=Object(r.useState)({name:"",email:"",message:""}),{name:t,email:n,message:c}=e,o=t=>{a({...e,[t.target.name]:t.target.value})};return l.a.createElement("div",{className:"contact-container"},l.a.createElement("div",{className:"contact-details"},l.a.createElement("h2",null,"Contact us"),l.a.createElement("p",null,"If you have any questions about our recipes or even suggestions, don't hesitate to contact us. We are looking forward to hearing from you!"),l.a.createElement("p",null,"E-mail: support@gmail.com")),l.a.createElement("div",{className:"contact-card"},l.a.createElement("h2",{className:"contact-title"},"Send us a message!"),l.a.createElement("form",{className:"contact-form",onSubmit:async t=>{t.preventDefault();try{await s.a.post("http://localhost:8288/api/contact",e),alert("Message sent successfully"),a({name:"",email:"",message:""})}catch(r){console.error(r),alert("Error sending message")}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Name:"),l.a.createElement("input",{type:"text",id:"name",name:"name",value:t,onChange:o,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"email"},"Email:"),l.a.createElement("input",{type:"email",id:"email",name:"email",value:n,onChange:o,required:!0})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"message"},"Message:"),l.a.createElement("textarea",{id:"message",name:"message",value:c,onChange:o,required:!0})),l.a.createElement("button",{type:"submit",className:"contact-button"},"Send Message"))))};t(36);var N=()=>{const{id:e}=Object(o.q)(),[a,t]=Object(r.useState)(""),[n,c]=Object(r.useState)(""),[i,m]=Object(r.useState)(""),[u,p]=Object(r.useState)(null),d=Object(o.o)();Object(r.useEffect)(()=>{(async()=>{try{const a=(await s.a.get("http://localhost:8288/api/recipes/".concat(e))).data;t(a.title),c(a.instructions),m(a.category)}catch(a){console.error("Error fetching recipe details:",a)}})()},[e]);return l.a.createElement("div",{className:"edit-recipe-container"},l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const r=localStorage.getItem("token"),l=new FormData;l.append("title",a),l.append("instructions",n),l.append("category",i),u&&l.append("image",u);try{await s.a.put("http://localhost:8288/api/recipes/".concat(e),l,{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"}}),d("/recipe/".concat(e))}catch(c){console.error("Error updating recipe:",c)}},className:"edit-recipe-form"},l.a.createElement("h2",null,"Edit Recipe"),l.a.createElement("label",null,"Title"),l.a.createElement("input",{type:"text",value:a,onChange:e=>t(e.target.value),required:!0}),l.a.createElement("label",null,"Instructions"),l.a.createElement("textarea",{value:n,onChange:e=>c(e.target.value),required:!0}),l.a.createElement("label",null,"Category"),l.a.createElement("select",{value:i,onChange:e=>m(e.target.value),required:!0},l.a.createElement("option",{value:""},"Select a category"),l.a.createElement("option",{value:"Salads"},"Salads"),l.a.createElement("option",{value:"Vegetarian Dishes"},"Vegetarian Dishes"),l.a.createElement("option",{value:"Low-Sugar Snacks"},"Low-Sugar Snacks"),l.a.createElement("option",{value:"Sugar-Free Desserts"},"Sugar-Free Desserts"),l.a.createElement("option",{value:"Healthy Beverages"},"Healthy Beverages"),l.a.createElement("option",{value:"Low-Sugar Desserts"},"Low-Sugar Desserts"),l.a.createElement("option",{value:"Sugar-Free Snacks"},"Sugar-Free Snacks"),l.a.createElement("option",{value:"Non-Vegetarian Food"},"Non-Vegetarian Food")),l.a.createElement("label",null,"Image"),l.a.createElement("input",{type:"file",onChange:e=>p(e.target.files[0])}),l.a.createElement("div",{className:"button-group"},l.a.createElement("button",{type:"button",className:"cancel-button",onClick:()=>d(-1)},"Cancel"),l.a.createElement("button",{type:"submit",className:"edit-recipe-button"},"Save Changes"))))};t(37);var w=()=>{const[e,a]=Object(r.useState)([]),t=Object(o.m)();return Object(r.useEffect)(()=>{(async()=>{const e=new URLSearchParams(t.search).get("query");if(e)try{const t=await s.a.get("http://localhost:8288/api/recipes/search?query=".concat(e));a(t.data)}catch(r){console.error("Error fetching search results:",r)}})()},[t.search]),l.a.createElement("div",{className:"search-results"},e.length>0?l.a.createElement("div",{className:"search-results-container"},e.map(e=>l.a.createElement(m,{key:e.recipe_id,recipe:e}))):l.a.createElement("p",null,"No results found for your search."))};var k=()=>l.a.createElement(c.a,null,l.a.createElement(b,null),l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/",element:l.a.createElement(i,null)}),l.a.createElement(o.a,{path:"/recipes",element:l.a.createElement(u,null)}),l.a.createElement(o.a,{path:"/recipe/:id",element:l.a.createElement(p,null)}),l.a.createElement(o.a,{path:"/add-recipe",element:l.a.createElement(d,null)}),l.a.createElement(o.a,{path:"/messages",element:l.a.createElement(g,null)}),l.a.createElement(o.a,{path:"/achievements",element:l.a.createElement(E,null)}),l.a.createElement(o.a,{path:"/login",element:l.a.createElement(h,null)}),l.a.createElement(o.a,{path:"/register",element:l.a.createElement(v,null)}),l.a.createElement(o.a,{path:"/profile",element:l.a.createElement(f,null)})," ",l.a.createElement(o.a,{path:"/user/:id",element:l.a.createElement(f,null)})," ",l.a.createElement(o.a,{path:"/contact",element:l.a.createElement(y,null)}),l.a.createElement(o.a,{path:"/recipes/category/:category",element:l.a.createElement(u,null)}),l.a.createElement(o.a,{path:"/edit-recipe/:id",element:l.a.createElement(N,null)}),l.a.createElement(o.a,{path:"/search",element:l.a.createElement(w,null)})),l.a.createElement(S,null));t(38);s.a.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(console.error("Unauthorized access - Redirecting to login."),localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)));const C=document.getElementById("root");Object(n.createRoot)(C).render(l.a.createElement(k,null))}],[[13,1,2]]]);
//# sourceMappingURL=main.02796fd9.chunk.js.map